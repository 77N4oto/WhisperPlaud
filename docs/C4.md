# C4 Model（テキスト）

## C1: システムコンテキスト
- 利用者: 個人（Naoto）
- 外部/周辺: ローカル MinIO（S3互換）, Redis, Pythonワーカー（GPU）, Ollama（LLM）
- データ境界: すべてローカル。PIIは端末内に限定

## C2: コンテナ（責務/プロトコル/スケール/可用性）
- デスクトップGUI（Electron）
  - 責務: Next.js UI を表示、ユーザー操作
  - I/F: `http://localhost:3000` へのHTTP、将来IPC
  - スケール: 単一プロセス、再起動で復旧
- Web/App サーバ（Next.js）
  - 責務: 認証、署名URL、SSE進捗、辞書CRUD、検索
  - 依存: MinIO, Redis, SQLite
- ワーカー（Python）
  - 責務: 文字起こし/話者分離/要約の実行
  - I/F: Redis（BullMQジョブ）, S3互換I/O
- データストア: MinIO（S3）, Redis, SQLite

## C3: 主要コンポーネント
- 認証、アップロード、キュー投入、SSE進捗、辞書/検索（FTS5）

## C4: 重要モジュール
- `src/app/api/*`（認証/ファイル/ジョブ/転記）
- `src/lib/*`（DB/キュー/S3/辞書）
- `workers/simple_processor.py`

## 横断関心
- セキュリティ: ENV管理、PIIログ禁止、最小権限
- 観測性: 構造化ログ、処理時間/失敗率メトリクス
- コスト: 端末内リソース（GPU時間）


